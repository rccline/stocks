{
  "hash": "2dfa2d13d5df0da7b925d6c56db95ed4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Scales Package\"\nformat:\n  html:\n    self-contained: true\n  pdf:\n    latex-engine: xelatex\n    keep-tex: true\neditor: source\nexecute: \n  warning: false\n  message: false\n---\n\n\n\n\n\n## TRYING TO RENDER PDF: /c/Users/Robert/AppData/Local/Programs/MiKTeX/miktex/bin/x64\n\n## [PDF???](https://www.youtube.com/watch?v=t30sqFch2v0)\ntypist tl;dw  \n\n\n \n## R Styled tables using tidyverse, gt and the scales packages\n\n*ABBV* = Abbvie Inc., *BTC* = Bitcoin, *ETH* = Etherium\n\n\\[Torbjorn Storli0(https://www.youtube.com/watch?v=JCVlI4si46o&t=203s) suggests checking out {*XTS*} package that works with {zoo} package. These packages are included with {*quantmod*}\n\nHow-to [Quarto setup chunks](https://rstudio-conf-2022.github.io/get-started-quarto/materials/03-computation-editors.html#/knitropts_chunk-defaults)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::opts_chunk$set()\n\nlibrary(quantmod)\nlibrary(tidyverse)\nlibrary(gt)\nlibrary(scales)\n\nstartdate = as.Date(\"2014-01-01\")\nenddate = as.Date(\"2024-04-09\")\n\n # get daily stock prices for Abbvie inc.\ngetSymbols(\"ABBV\", from = startdate, to=enddate)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"ABBV\"\n```\n\n\n:::\n:::\n\n\n\n\nConvert Daily stock prices to monthly stock prices\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmonthly_prices <- to.period(ABBV, period = 'months', OHLC = FALSE)\n\nhead(monthly_prices)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           ABBV.Open ABBV.High ABBV.Low ABBV.Close ABBV.Volume ABBV.Adjusted\n2014-01-31     49.94     50.55    49.07      49.23    12863500      32.62974\n2014-02-28     50.84     51.96    50.51      50.91     7095600      33.74325\n2014-03-31     51.34     51.70    50.95      51.40     4813100      34.06802\n2014-04-30     51.38     52.17    51.00      52.08     7430600      34.82764\n2014-05-30     53.98     54.43    53.89      54.33     4025600      36.33229\n2014-06-30     56.51     56.89    56.10      56.44     6229700      37.74332\n```\n\n\n:::\n\n```{.r .cell-code}\ntail(monthly_prices) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n           ABBV.Open ABBV.High ABBV.Low ABBV.Close ABBV.Volume ABBV.Adjusted\n2023-11-30    138.01    142.70   138.01     142.39     9297400      141.0424\n2023-12-29    154.54    155.21   154.41     154.97     3711400      153.5034\n2024-01-31    165.75    165.86   163.95     164.40     4993900      164.4000\n2024-02-29    177.87    178.02   175.39     176.05     7485700      176.0500\n2024-03-28    181.00    182.30   180.30     182.10     5418700      182.1000\n2024-04-08    169.21    171.97   168.40     169.80     4745000      169.8000\n```\n\n\n:::\n:::\n\n\n\n\nConvert data to a tibble; and date index to its own column:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nABBV_data <- as_tibble(monthly_prices) |>\n  mutate(Date = index(monthly_prices))\n```\n:::\n\n\n\n\nClean up the ABBV tibble table\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nABBV_tibble = ABBV_data |>\n  rename(Open = ABBV.Open,\n        High = ABBV.High,\n        Low = ABBV.Low,\n        Close = ABBV.Close,\n        Volume = ABBV.Volume,\n        Adjusted = ABBV.Adjusted) |>\n\ndplyr::select(Date, Open, High, Low, Close, Volume, Adjusted)\n```\n:::\n\n\n\n\nCreate a gt table\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nABBV_gt <- gt(ABBV_tibble) \n\nABBV_tab <- ABBV_gt |>\n tab_header(\n  \n    title = md(\"**<font color = blue>Abbvie Inc, Monthly Stock Prices</font>**\"),\n    subtitle = md(\"**From** 2014 **to** 2024-04-09\")\n ) |> \n cols_width(c(Date:Adjusted)  ~ px(120)\n  )\n\nABBV_tab\n```\n\n::: {.cell-output-display}\n\\begin{longtable}{>{\\raggedleft\\arraybackslash}p{120px}>{\\raggedleft\\arraybackslash}p{120px}>{\\raggedleft\\arraybackslash}p{120px}>{\\raggedleft\\arraybackslash}p{120px}>{\\raggedleft\\arraybackslash}p{120px}>{\\raggedleft\\arraybackslash}p{120px}>{\\raggedleft\\arraybackslash}p{120px}}\n\\caption*{\n{\\large \\textbf{Abbvie Inc, Monthly Stock Prices}} \\\\ \n{\\small \\textbf{From} 2014 \\textbf{to} 2024-04-09}\n} \\\\ \n\\toprule\nDate & Open & High & Low & Close & Volume & Adjusted \\\\ \n\\midrule\\addlinespace[2.5pt]\n16101 & 49.94 & 50.55 & 49.07 & 49.23 & 12863500 & 32.62974 \\\\ \n16129 & 50.84 & 51.96 & 50.51 & 50.91 & 7095600 & 33.74325 \\\\ \n16160 & 51.34 & 51.70 & 50.95 & 51.40 & 4813100 & 34.06802 \\\\ \n16190 & 51.38 & 52.17 & 51.00 & 52.08 & 7430600 & 34.82764 \\\\ \n16220 & 53.98 & 54.43 & 53.89 & 54.33 & 4025600 & 36.33229 \\\\ \n16251 & 56.51 & 56.89 & 56.10 & 56.44 & 6229700 & 37.74332 \\\\ \n16282 & 53.13 & 53.40 & 52.30 & 52.34 & 15479900 & 35.26702 \\\\ \n16311 & 55.75 & 55.80 & 55.24 & 55.28 & 7524400 & 37.24800 \\\\ \n16343 & 58.26 & 58.81 & 57.73 & 57.76 & 8599000 & 38.91905 \\\\ \n16374 & 63.06 & 63.99 & 62.37 & 63.46 & 15009900 & 43.07874 \\\\ \n16402 & 69.00 & 69.48 & 68.89 & 69.20 & 2953700 & 46.97523 \\\\ \n16435 & 66.72 & 67.10 & 65.35 & 65.44 & 3917300 & 44.42281 \\\\ \n16465 & 62.09 & 62.68 & 60.12 & 60.35 & 17582500 & 41.27511 \\\\ \n16493 & 60.53 & 60.99 & 60.37 & 60.50 & 8649100 & 41.37770 \\\\ \n16525 & 58.01 & 58.81 & 57.71 & 58.54 & 12313600 & 40.03721 \\\\ \n16555 & 65.39 & 65.92 & 64.32 & 64.66 & 10298600 & 44.58965 \\\\ \n16584 & 67.22 & 67.52 & 66.39 & 66.59 & 9451000 & 45.92056 \\\\ \n16616 & 68.00 & 68.22 & 66.66 & 67.19 & 11459600 & 46.33433 \\\\ \n16647 & 70.38 & 70.38 & 69.73 & 70.01 & 6181300 & 48.63730 \\\\ \n16678 & 64.14 & 64.31 & 62.25 & 62.41 & 15581100 & 43.35743 \\\\ \n16708 & 53.54 & 54.50 & 53.36 & 54.41 & 11895500 & 37.79968 \\\\ \n16738 & 57.87 & 60.73 & 57.66 & 59.55 & 27465600 & 41.75235 \\\\ \n16769 & 59.96 & 60.21 & 57.96 & 58.15 & 12660200 & 40.77077 \\\\ \n16800 & 59.50 & 59.93 & 59.20 & 59.24 & 6104800 & 41.53499 \\\\ \n16829 & 53.42 & 55.31 & 53.42 & 54.90 & 17768700 & 38.89637 \\\\ \n16860 & 55.87 & 56.00 & 54.47 & 54.61 & 8395100 & 38.69092 \\\\ \n16891 & 57.02 & 57.46 & 56.82 & 57.12 & 4930300 & 40.46924 \\\\ \n16920 & 61.03 & 61.45 & 60.48 & 61.00 & 13052700 & 43.63347 \\\\ \n16952 & 62.71 & 63.49 & 62.64 & 62.93 & 7147900 & 45.01400 \\\\ \n16982 & 61.79 & 62.02 & 61.14 & 61.91 & 7920600 & 44.28439 \\\\ \n17011 & 65.27 & 66.40 & 65.15 & 66.23 & 10525000 & 47.79039 \\\\ \n17044 & 64.21 & 64.45 & 63.50 & 64.10 & 6750000 & 46.25342 \\\\ \n17074 & 62.67 & 63.26 & 62.45 & 63.07 & 7325400 & 45.51019 \\\\ \n17105 & 57.06 & 57.30 & 55.72 & 55.78 & 14185800 & 40.62096 \\\\ \n17135 & 61.63 & 61.84 & 60.63 & 60.80 & 9025200 & 44.27672 \\\\ \n17165 & 62.73 & 62.93 & 62.41 & 62.62 & 5999200 & 45.60210 \\\\ \n17197 & 60.01 & 61.32 & 59.75 & 61.11 & 8149800 & 44.95150 \\\\ \n17225 & 62.11 & 62.40 & 61.69 & 61.84 & 6756100 & 45.48847 \\\\ \n17256 & 65.46 & 65.52 & 65.15 & 65.16 & 4057800 & 47.93061 \\\\ \n17284 & 66.06 & 66.32 & 65.44 & 65.94 & 5521100 & 48.98691 \\\\ \n17317 & 66.24 & 66.41 & 65.61 & 66.02 & 6935800 & 49.04634 \\\\ \n17347 & 72.57 & 72.82 & 72.21 & 72.51 & 4729100 & 53.86778 \\\\ \n17378 & 70.52 & 70.58 & 69.83 & 69.91 & 7770400 & 52.40307 \\\\ \n17409 & 74.11 & 75.40 & 73.92 & 75.30 & 6177600 & 56.44331 \\\\ \n17438 & 88.69 & 89.35 & 87.67 & 88.86 & 6769400 & 66.60760 \\\\ \n17470 & 90.88 & 91.82 & 90.04 & 90.25 & 7065600 & 68.12146 \\\\ \n17500 & 96.36 & 97.53 & 96.21 & 96.92 & 7889600 & 73.15600 \\\\ \n17529 & 98.14 & 98.43 & 96.71 & 96.71 & 3214400 & 72.99751 \\\\ \n17562 & 116.21 & 116.50 & 111.29 & 112.22 & 15744800 & 85.31220 \\\\ \n17590 & 119.00 & 120.00 & 115.78 & 115.83 & 6660000 & 88.05660 \\\\ \n17619 & 94.52 & 95.54 & 93.50 & 94.65 & 7399400 & 71.95507 \\\\ \n17651 & 99.05 & 99.42 & 96.52 & 96.55 & 7449400 & 74.15980 \\\\ \n17682 & 100.93 & 101.10 & 98.50 & 98.94 & 18910900 & 75.99554 \\\\ \n17711 & 92.84 & 94.46 & 92.56 & 92.65 & 6787900 & 71.16422 \\\\ \n17743 & 91.65 & 92.63 & 91.33 & 92.23 & 8691800 & 71.56509 \\\\ \n17774 & 96.25 & 96.69 & 95.72 & 95.98 & 4703100 & 74.47486 \\\\ \n17802 & 94.00 & 95.16 & 93.84 & 94.58 & 4527900 & 73.38857 \\\\ \n17835 & 80.98 & 81.58 & 77.74 & 77.85 & 14068500 & 61.05328 \\\\ \n17865 & 90.26 & 94.27 & 89.87 & 94.27 & 12031700 & 73.93051 \\\\ \n17896 & 91.60 & 92.99 & 91.23 & 92.19 & 5722100 & 72.29930 \\\\ \n17927 & 78.95 & 81.31 & 78.71 & 80.29 & 11563900 & 63.73912 \\\\ \n17955 & 79.46 & 79.71 & 78.75 & 79.24 & 6310800 & 62.90555 \\\\ \n17984 & 80.08 & 80.90 & 79.96 & 80.59 & 7105900 & 63.97727 \\\\ \n18016 & 80.68 & 80.69 & 78.68 & 79.39 & 9367400 & 63.86028 \\\\ \n18047 & 77.31 & 77.57 & 76.40 & 76.71 & 4003200 & 61.70450 \\\\ \n18075 & 70.58 & 72.74 & 70.33 & 72.72 & 21381500 & 58.49502 \\\\ \n18108 & 66.91 & 67.38 & 65.63 & 66.62 & 11300000 & 54.40540 \\\\ \n18138 & 66.40 & 66.43 & 65.49 & 65.74 & 6415100 & 53.68674 \\\\ \n18169 & 74.95 & 76.44 & 74.95 & 75.72 & 8315100 & 61.83694 \\\\ \n18200 & 79.71 & 79.74 & 78.74 & 79.55 & 10009400 & 65.91203 \\\\ \n18229 & 88.00 & 88.09 & 87.22 & 87.73 & 3042800 & 72.68965 \\\\ \n18261 & 88.21 & 88.60 & 87.88 & 88.54 & 4702100 & 73.36077 \\\\ \n18292 & 81.54 & 81.72 & 80.41 & 81.02 & 13870100 & 68.03696 \\\\ \n18320 & 82.79 & 85.71 & 81.58 & 85.71 & 18450000 & 71.97540 \\\\ \n18352 & 75.40 & 77.92 & 74.44 & 76.19 & 20474400 & 63.98094 \\\\ \n18382 & 82.97 & 83.26 & 81.23 & 82.20 & 15535800 & 70.05735 \\\\ \n18411 & 91.00 & 92.89 & 89.60 & 92.67 & 13758800 & 78.98072 \\\\ \n18443 & 95.97 & 98.88 & 95.83 & 98.18 & 8112500 & 83.67677 \\\\ \n18474 & 95.54 & 97.25 & 93.55 & 94.91 & 14613000 & 81.87711 \\\\ \n18505 & 94.12 & 96.01 & 94.01 & 95.77 & 9932300 & 82.61900 \\\\ \n18535 & 87.00 & 88.44 & 86.81 & 87.59 & 8209300 & 75.56227 \\\\ \n18565 & 83.20 & 86.14 & 83.00 & 85.10 & 18089100 & 74.41394 \\\\ \n18596 & 105.12 & 105.42 & 103.65 & 104.58 & 20726500 & 91.44783 \\\\ \n18627 & 105.26 & 107.28 & 104.85 & 107.15 & 6148100 & 93.69511 \\\\ \n18656 & 104.00 & 104.49 & 101.81 & 102.48 & 9380400 & 90.65963 \\\\ \n18684 & 107.68 & 108.58 & 105.36 & 107.74 & 9250000 & 95.31291 \\\\ \n18717 & 106.88 & 109.18 & 106.80 & 108.22 & 9048000 & 95.73756 \\\\ \n18747 & 111.47 & 112.31 & 110.11 & 111.50 & 10575400 & 99.83855 \\\\ \n18775 & 113.33 & 114.48 & 112.86 & 113.20 & 7104300 & 101.36073 \\\\ \n18808 & 112.21 & 112.92 & 111.63 & 112.64 & 5042600 & 100.85930 \\\\ \n18838 & 119.00 & 119.15 & 116.12 & 116.30 & 9017200 & 105.29747 \\\\ \n18870 & 120.83 & 121.17 & 120.03 & 120.78 & 6021800 & 109.35363 \\\\ \n18900 & 109.20 & 110.42 & 107.78 & 107.87 & 7886400 & 97.66498 \\\\ \n18929 & 112.09 & 114.92 & 111.42 & 114.67 & 16545000 & 105.08034 \\\\ \n18961 & 116.68 & 116.79 & 115.10 & 115.28 & 8172100 & 105.63934 \\\\ \n18992 & 136.04 & 136.21 & 135.30 & 135.40 & 3963400 & 124.07674 \\\\ \n19023 & 136.82 & 137.17 & 135.62 & 136.89 & 10300000 & 126.74381 \\\\ \n19051 & 146.65 & 148.08 & 145.76 & 147.77 & 11090600 & 136.81743 \\\\ \n19082 & 162.93 & 164.66 & 162.10 & 162.11 & 8670100 & 150.09450 \\\\ \n19111 & 149.56 & 149.86 & 139.93 & 146.88 & 25155900 & 137.14919 \\\\ \n19143 & 148.64 & 148.88 & 146.67 & 147.37 & 11227800 & 137.60672 \\\\ \n19173 & 153.17 & 154.04 & 150.87 & 153.16 & 7289500 & 143.01314 \\\\ \n19202 & 145.44 & 146.30 & 139.05 & 143.51 & 17754700 & 135.25589 \\\\ \n19235 & 135.69 & 136.04 & 134.17 & 134.46 & 5789600 & 126.72643 \\\\ \n19265 & 142.20 & 142.32 & 134.09 & 134.21 & 15359000 & 126.49078 \\\\ \n19296 & 145.17 & 146.78 & 144.08 & 146.40 & 8604800 & 139.38365 \\\\ \n19326 & 158.79 & 161.18 & 156.46 & 161.18 & 12342500 & 153.45532 \\\\ \n19356 & 162.23 & 162.85 & 159.82 & 161.61 & 3680400 & 153.86470 \\\\ \n19388 & 145.63 & 147.85 & 144.41 & 147.75 & 5628700 & 142.00618 \\\\ \n19416 & 153.96 & 154.37 & 152.62 & 153.90 & 7561700 & 147.91708 \\\\ \n19447 & 158.43 & 159.57 & 157.73 & 159.37 & 4957300 & 153.17444 \\\\ \n19475 & 147.97 & 151.39 & 147.44 & 151.12 & 7123800 & 146.58133 \\\\ \n19508 & 136.62 & 138.71 & 135.77 & 137.96 & 12579100 & 133.81659 \\\\ \n19538 & 133.47 & 135.93 & 132.80 & 134.73 & 8710500 & 130.68356 \\\\ \n19569 & 150.43 & 150.50 & 147.62 & 149.58 & 9109200 & 146.69604 \\\\ \n19600 & 148.39 & 148.71 & 146.87 & 146.96 & 4110700 & 144.12656 \\\\ \n19629 & 152.46 & 152.53 & 148.83 & 149.06 & 5581600 & 146.18605 \\\\ \n19661 & 142.09 & 142.22 & 139.68 & 141.18 & 10394000 & 139.84387 \\\\ \n19691 & 138.01 & 142.70 & 138.01 & 142.39 & 9297400 & 141.04243 \\\\ \n19720 & 154.54 & 155.21 & 154.41 & 154.97 & 3711400 & 153.50337 \\\\ \n19753 & 165.75 & 165.86 & 163.95 & 164.40 & 4993900 & 164.39999 \\\\ \n19782 & 177.87 & 178.02 & 175.39 & 176.05 & 7485700 & 176.05000 \\\\ \n19810 & 181.00 & 182.30 & 180.30 & 182.10 & 5418700 & 182.10001 \\\\ \n19821 & 169.21 & 171.97 & 168.40 & 169.80 & 4745000 & 169.80000 \\\\ \n\\bottomrule\n\\end{longtable}\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "\\usepackage{booktabs}\n\\usepackage{caption}\n\\usepackage{longtable}\n\\usepackage{colortbl}\n\\usepackage{array}\n"
      ]
    },
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}